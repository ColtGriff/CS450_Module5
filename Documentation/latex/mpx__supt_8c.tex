\hypertarget{mpx__supt_8c}{}\doxysection{modules/mpx\+\_\+supt.c File Reference}
\label{mpx__supt_8c}\index{modules/mpx\_supt.c@{modules/mpx\_supt.c}}
{\ttfamily \#include \char`\"{}mpx\+\_\+supt.\+h\char`\"{}}\newline
{\ttfamily \#include $<$mem/heap.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$core/serial.\+h$>$}\newline
{\ttfamily \#include \char`\"{}R2/\+R2commands.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}R2/\+R2\+\_\+\+Internal\+\_\+\+Functions\+\_\+\+And\+\_\+\+Structures.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}R3/\+R3commands.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{mpx__supt_8c_aaa3eb70f93cb8acf38ec0d028b9874f0}{sys\+\_\+req}} (int op\+\_\+code, int device\+\_\+id, char $\ast$buffer\+\_\+ptr, int $\ast$count\+\_\+ptr)
\item 
void \mbox{\hyperlink{mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}{mpx\+\_\+init}} (int cur\+\_\+mod)
\item 
void \mbox{\hyperlink{mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}{sys\+\_\+set\+\_\+malloc}} (\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}($\ast$func)(\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}))
\item 
void \mbox{\hyperlink{mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}{sys\+\_\+set\+\_\+free}} (int($\ast$func)(void $\ast$))
\item 
void $\ast$ \mbox{\hyperlink{mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}{sys\+\_\+alloc\+\_\+mem}} (\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}} size)
\item 
int \mbox{\hyperlink{mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}{sys\+\_\+free\+\_\+mem}} (void $\ast$ptr)
\item 
void \mbox{\hyperlink{mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}{idle}} ()
\item 
\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}} $\ast$ \mbox{\hyperlink{mpx__supt_8c_aad8093682fcfe15c2669288f19d1c52c}{sys\+\_\+call}} (\mbox{\hyperlink{structcontext}{context}} $\ast$registers)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structparam}{param}} \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}
\item 
int \mbox{\hyperlink{mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\+\_\+module}} = -\/1
\item 
\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}($\ast$ \mbox{\hyperlink{mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}{student\+\_\+malloc}} )(\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}})
\item 
int($\ast$ \mbox{\hyperlink{mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\+\_\+free}} )(void $\ast$)
\item 
\mbox{\hyperlink{structPCB}{P\+CB}} $\ast$ \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{C\+OP}}
\item 
\mbox{\hyperlink{structcontext}{context}} $\ast$ \mbox{\hyperlink{mpx__supt_8c_ae51866d22794030318fe70460429d4f6}{caller\+Context}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}\label{mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}} 
\index{mpx\_supt.c@{mpx\_supt.c}!idle@{idle}}
\index{idle@{idle}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{idle()}{idle()}}
{\footnotesize\ttfamily void idle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 178 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{179 \{}
\DoxyCodeLine{180   \textcolor{keywordtype}{char} msg[30];}
\DoxyCodeLine{181   \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{182 }
\DoxyCodeLine{183   \mbox{\hyperlink{string_8h_ace6ee45c30e71865e6eb635200379db9}{memset}}(msg, \textcolor{charliteral}{'\(\backslash\)0'}, \textcolor{keyword}{sizeof}(msg));}
\DoxyCodeLine{184   \mbox{\hyperlink{string_8h_a1eb9cae61e6a6282c28dbc298ef7297e}{strcpy}}(msg, \textcolor{stringliteral}{"{}IDLE PROCESS EXECUTING.\(\backslash\)n"{}});}
\DoxyCodeLine{185   count = \mbox{\hyperlink{string_8h_a2dee044e4e667b5b789b493abd21cfa4}{strlen}}(msg);}
\DoxyCodeLine{186 }
\DoxyCodeLine{187   \textcolor{keywordflow}{while} (1)}
\DoxyCodeLine{188   \{}
\DoxyCodeLine{189     \mbox{\hyperlink{mpx__supt_8c_aaa3eb70f93cb8acf38ec0d028b9874f0}{sys\_req}}(\mbox{\hyperlink{mpx__supt_8h_aa10f470e996d0f51210d24f442d25e1e}{WRITE}}, \mbox{\hyperlink{mpx__supt_8h_a84cb8bbda8042a324f49102bc200cc54}{DEFAULT\_DEVICE}}, msg, \&count);}
\DoxyCodeLine{190     \mbox{\hyperlink{mpx__supt_8c_aaa3eb70f93cb8acf38ec0d028b9874f0}{sys\_req}}(\mbox{\hyperlink{mpx__supt_8h_a9c21a7caee326d7803b94ae1952b27ca}{IDLE}}, \mbox{\hyperlink{mpx__supt_8h_a84cb8bbda8042a324f49102bc200cc54}{DEFAULT\_DEVICE}}, \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{191   \}}
\DoxyCodeLine{192 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}\label{mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}} 
\index{mpx\_supt.c@{mpx\_supt.c}!mpx\_init@{mpx\_init}}
\index{mpx\_init@{mpx\_init}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{mpx\_init()}{mpx\_init()}}
{\footnotesize\ttfamily void mpx\+\_\+init (\begin{DoxyParamCaption}\item[{int}]{cur\+\_\+mod }\end{DoxyParamCaption})}



Definition at line 114 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{115 \{}
\DoxyCodeLine{116 }
\DoxyCodeLine{117   \mbox{\hyperlink{mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\_module}} = cur\_mod;}
\DoxyCodeLine{118   \textcolor{keywordflow}{if} (cur\_mod == \mbox{\hyperlink{mpx__supt_8h_a02d9b620a75ca60cd5d24b51309af887}{MEM\_MODULE}})}
\DoxyCodeLine{119     mem\_module\_active = \mbox{\hyperlink{mpx__supt_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{120 }
\DoxyCodeLine{121   \textcolor{keywordflow}{if} (cur\_mod == \mbox{\hyperlink{mpx__supt_8h_a69d0c9d3e706f2549635aeb72dc2c9b1}{IO\_MODULE}})}
\DoxyCodeLine{122     io\_module\_active = \mbox{\hyperlink{mpx__supt_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{123 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}\label{mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_alloc\_mem@{sys\_alloc\_mem}}
\index{sys\_alloc\_mem@{sys\_alloc\_mem}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_alloc\_mem()}{sys\_alloc\_mem()}}
{\footnotesize\ttfamily void$\ast$ sys\+\_\+alloc\+\_\+mem (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}}]{size }\end{DoxyParamCaption})}



Definition at line 150 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{151 \{}
\DoxyCodeLine{152   \textcolor{keywordflow}{if} (!mem\_module\_active)}
\DoxyCodeLine{153     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *)\mbox{\hyperlink{heap_8h_a15d6a52c5c080c8c7ffc73e336d8e574}{kmalloc}}(size);}
\DoxyCodeLine{154   \textcolor{keywordflow}{else}}
\DoxyCodeLine{155     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *)(*student\_malloc)(size);}
\DoxyCodeLine{156 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_aad8093682fcfe15c2669288f19d1c52c}\label{mpx__supt_8c_aad8093682fcfe15c2669288f19d1c52c}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_call@{sys\_call}}
\index{sys\_call@{sys\_call}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_call()}{sys\_call()}}
{\footnotesize\ttfamily \mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}$\ast$ sys\+\_\+call (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcontext}{context}} $\ast$}]{registers }\end{DoxyParamCaption})}



Definition at line 196 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{197 \{ \textcolor{comment}{// Benjamin and Anastase programmed this function}}
\DoxyCodeLine{198 }
\DoxyCodeLine{199   \mbox{\hyperlink{structPCB}{PCB}} *tempOOP = \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{200   \textcolor{keywordflow}{if} (\mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}} == \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{201   \{ \textcolor{comment}{// sys\_call has not been called yet.}}
\DoxyCodeLine{202 }
\DoxyCodeLine{203     \mbox{\hyperlink{mpx__supt_8c_ae51866d22794030318fe70460429d4f6}{callerContext}} = registers;}
\DoxyCodeLine{204   \}}
\DoxyCodeLine{205   \textcolor{keywordflow}{else}}
\DoxyCodeLine{206   \{}
\DoxyCodeLine{207     \textcolor{keywordflow}{if} (\mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_a81c8b24055c2908ebe480598aba6044c}{op\_code}} == \mbox{\hyperlink{mpx__supt_8h_a9c21a7caee326d7803b94ae1952b27ca}{IDLE}})}
\DoxyCodeLine{208     \{ \textcolor{comment}{// Save the context (reassign COP's stack top).}}
\DoxyCodeLine{209       \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}}-\/>\mbox{\hyperlink{structPCB_a1ad17e453fc473c4b4f467fb58e2b9ca}{runningStatus}} = 0;}
\DoxyCodeLine{210       \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}}-\/>\mbox{\hyperlink{structPCB_a927da593bccc4abb835f48da1557df42}{stackTop}} = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)registers;}
\DoxyCodeLine{211       tempOOP = \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}};}
\DoxyCodeLine{212     \}}
\DoxyCodeLine{213     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_a81c8b24055c2908ebe480598aba6044c}{op\_code}} == \mbox{\hyperlink{mpx__supt_8h_ad111e603bbebe5d87f6bc39264ce4733}{EXIT}})}
\DoxyCodeLine{214     \{ \textcolor{comment}{// free COP.}}
\DoxyCodeLine{215       \mbox{\hyperlink{mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}{sys\_free\_mem}}(\mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}});}
\DoxyCodeLine{216     \}}
\DoxyCodeLine{217   \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219   \mbox{\hyperlink{structqueue}{queue}} *\mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_ab4bd464c1b566560d16891b2b1babe42}{ready}} = \mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_acc4c78320b3fb77214d451133e90df5d}{getReady}}();}
\DoxyCodeLine{220 }
\DoxyCodeLine{221   \textcolor{keywordflow}{if} (\mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_ab4bd464c1b566560d16891b2b1babe42}{ready}}-\/>\mbox{\hyperlink{structqueue_a842af6c249ba80f2ab495e71c4233ddd}{head}} != \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{222   \{}
\DoxyCodeLine{223     \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}} = \mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_ab4bd464c1b566560d16891b2b1babe42}{ready}}-\/>\mbox{\hyperlink{structqueue_a842af6c249ba80f2ab495e71c4233ddd}{head}};}
\DoxyCodeLine{224     \mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_a7c5d1dea8311ecc31306a370d2877616}{removePCB}}(\mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}});}
\DoxyCodeLine{225     \mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}}-\/>\mbox{\hyperlink{structPCB_a1ad17e453fc473c4b4f467fb58e2b9ca}{runningStatus}} = 1;}
\DoxyCodeLine{226 }
\DoxyCodeLine{227     \textcolor{keywordflow}{if} (tempOOP != \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{228     \{}
\DoxyCodeLine{229       \mbox{\hyperlink{R2__Internal__Functions__And__Structures_8c_a64667c0bd1ab46d8e14c4b26d6e3f975}{insertPCB}}(tempOOP);}
\DoxyCodeLine{230     \}}
\DoxyCodeLine{231 }
\DoxyCodeLine{232     \textcolor{keywordflow}{return} (\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}} *)\mbox{\hyperlink{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}{COP}}-\/>\mbox{\hyperlink{structPCB_a927da593bccc4abb835f48da1557df42}{stackTop}};}
\DoxyCodeLine{233   \}}
\DoxyCodeLine{234   \textcolor{keywordflow}{return} (\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}} *)\mbox{\hyperlink{mpx__supt_8c_ae51866d22794030318fe70460429d4f6}{callerContext}};}
\DoxyCodeLine{235 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}\label{mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_free\_mem@{sys\_free\_mem}}
\index{sys\_free\_mem@{sys\_free\_mem}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_free\_mem()}{sys\_free\_mem()}}
{\footnotesize\ttfamily int sys\+\_\+free\+\_\+mem (\begin{DoxyParamCaption}\item[{void $\ast$}]{ptr }\end{DoxyParamCaption})}



Definition at line 163 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{164 \{}
\DoxyCodeLine{165   \textcolor{keywordflow}{if} (mem\_module\_active)}
\DoxyCodeLine{166     \textcolor{keywordflow}{return} (*\mbox{\hyperlink{mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\_free}})(ptr);}
\DoxyCodeLine{167   \textcolor{comment}{// otherwise we don't free anything}}
\DoxyCodeLine{168   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{169 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_aaa3eb70f93cb8acf38ec0d028b9874f0}\label{mpx__supt_8c_aaa3eb70f93cb8acf38ec0d028b9874f0}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_req@{sys\_req}}
\index{sys\_req@{sys\_req}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_req()}{sys\_req()}}
{\footnotesize\ttfamily int sys\+\_\+req (\begin{DoxyParamCaption}\item[{int}]{op\+\_\+code,  }\item[{int}]{device\+\_\+id,  }\item[{char $\ast$}]{buffer\+\_\+ptr,  }\item[{int $\ast$}]{count\+\_\+ptr }\end{DoxyParamCaption})}



Definition at line 50 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{55 \{}
\DoxyCodeLine{56   \textcolor{keywordtype}{int} return\_code = 0;}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   \textcolor{keywordflow}{if} (op\_code == \mbox{\hyperlink{mpx__supt_8h_a9c21a7caee326d7803b94ae1952b27ca}{IDLE}} || op\_code == \mbox{\hyperlink{mpx__supt_8h_ad111e603bbebe5d87f6bc39264ce4733}{EXIT}})}
\DoxyCodeLine{59   \{}
\DoxyCodeLine{60     \textcolor{comment}{// store the process's operation request}}
\DoxyCodeLine{61     \textcolor{comment}{// triger interrupt 60h to invoke}}
\DoxyCodeLine{62     \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_a81c8b24055c2908ebe480598aba6044c}{op\_code}} = op\_code;}
\DoxyCodeLine{63     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}int \$60"{}});}
\DoxyCodeLine{64   \} \textcolor{comment}{// idle or exit}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (op\_code == \mbox{\hyperlink{mpx__supt_8h_ada74e7db007a68e763f20c17f2985356}{READ}} || op\_code == \mbox{\hyperlink{mpx__supt_8h_aa10f470e996d0f51210d24f442d25e1e}{WRITE}})}
\DoxyCodeLine{67   \{}
\DoxyCodeLine{68     \textcolor{comment}{// validate buffer pointer and count pointer}}
\DoxyCodeLine{69     \textcolor{keywordflow}{if} (buffer\_ptr == \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})}
\DoxyCodeLine{70       return\_code = \mbox{\hyperlink{mpx__supt_8h_a9f45976a0d1fa6f0a85a74b6efd93835}{INVALID\_BUFFER}};}
\DoxyCodeLine{71     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (count\_ptr == \mbox{\hyperlink{system_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} || *count\_ptr <= 0)}
\DoxyCodeLine{72       return\_code = \mbox{\hyperlink{mpx__supt_8h_a2b85babe3dc4162f5551aae5d269ba60}{INVALID\_COUNT}};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{comment}{// if parameters are valid store in the params structure}}
\DoxyCodeLine{75     \textcolor{keywordflow}{if} (return\_code == 0)}
\DoxyCodeLine{76     \{}
\DoxyCodeLine{77       \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_a81c8b24055c2908ebe480598aba6044c}{op\_code}} = op\_code;}
\DoxyCodeLine{78       \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_a44a7285b02749114186a9f9971941bcb}{device\_id}} = device\_id;}
\DoxyCodeLine{79       \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_af15d63bace93014ec7425635c892ce99}{buffer\_ptr}} = buffer\_ptr;}
\DoxyCodeLine{80       \mbox{\hyperlink{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}}.\mbox{\hyperlink{structparam_ab61d8fe96dbeed1ef0387802ac453c53}{count\_ptr}} = count\_ptr;}
\DoxyCodeLine{81 }
\DoxyCodeLine{82       \textcolor{keywordflow}{if} (!io\_module\_active)}
\DoxyCodeLine{83       \{}
\DoxyCodeLine{84         \textcolor{comment}{// if default device}}
\DoxyCodeLine{85         \textcolor{keywordflow}{if} (op\_code == \mbox{\hyperlink{mpx__supt_8h_ada74e7db007a68e763f20c17f2985356}{READ}})}
\DoxyCodeLine{86           return\_code = *(\mbox{\hyperlink{serial_8h_ab1d1d36bd91339352f5b66f809b34d8c}{polling}}(buffer\_ptr, count\_ptr));}
\DoxyCodeLine{87 }
\DoxyCodeLine{88         \textcolor{keywordflow}{else} \textcolor{comment}{//must be WRITE}}
\DoxyCodeLine{89           return\_code = \mbox{\hyperlink{serial_8h_a995827efcd4dcfb780c9fbb9645410a4}{serial\_print}}(buffer\_ptr);}
\DoxyCodeLine{90       \}}
\DoxyCodeLine{91       \textcolor{keywordflow}{else}}
\DoxyCodeLine{92       \{ \textcolor{comment}{// I/O module is implemented}}
\DoxyCodeLine{93         \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"{}int \$60"{}});}
\DoxyCodeLine{94       \} \textcolor{comment}{// NOT IO\_MODULE}}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96   \}}
\DoxyCodeLine{97   \textcolor{keywordflow}{else}}
\DoxyCodeLine{98     return\_code = \mbox{\hyperlink{mpx__supt_8h_a95d66938b0cfadb27cc1368b5e04fdb3}{INVALID\_OPERATION}};}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   \textcolor{keywordflow}{return} return\_code;}
\DoxyCodeLine{101 \} \textcolor{comment}{// end of sys\_req}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}\label{mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_set\_free@{sys\_set\_free}}
\index{sys\_set\_free@{sys\_set\_free}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_set\_free()}{sys\_set\_free()}}
{\footnotesize\ttfamily void sys\+\_\+set\+\_\+free (\begin{DoxyParamCaption}\item[{int($\ast$)(void $\ast$)}]{func }\end{DoxyParamCaption})}



Definition at line 140 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{141 \{}
\DoxyCodeLine{142   \mbox{\hyperlink{mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\_free}} = func;}
\DoxyCodeLine{143 \}}

\end{DoxyCode}
\mbox{\Hypertarget{mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}\label{mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}} 
\index{mpx\_supt.c@{mpx\_supt.c}!sys\_set\_malloc@{sys\_set\_malloc}}
\index{sys\_set\_malloc@{sys\_set\_malloc}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{sys\_set\_malloc()}{sys\_set\_malloc()}}
{\footnotesize\ttfamily void sys\+\_\+set\+\_\+malloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}($\ast$)(\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}})}]{func }\end{DoxyParamCaption})}



Definition at line 130 of file mpx\+\_\+supt.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{131 \{}
\DoxyCodeLine{132   \mbox{\hyperlink{mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}{student\_malloc}} = func;}
\DoxyCodeLine{133 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{mpx__supt_8c_ae51866d22794030318fe70460429d4f6}\label{mpx__supt_8c_ae51866d22794030318fe70460429d4f6}} 
\index{mpx\_supt.c@{mpx\_supt.c}!callerContext@{callerContext}}
\index{callerContext@{callerContext}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{callerContext}{callerContext}}
{\footnotesize\ttfamily \mbox{\hyperlink{structcontext}{context}}$\ast$ caller\+Context}



Definition at line 195 of file mpx\+\_\+supt.\+c.

\mbox{\Hypertarget{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}\label{mpx__supt_8c_a05bd2167cb317c865fdee060f1749c07}} 
\index{mpx\_supt.c@{mpx\_supt.c}!COP@{COP}}
\index{COP@{COP}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{COP}{COP}}
{\footnotesize\ttfamily \mbox{\hyperlink{structPCB}{P\+CB}}$\ast$ C\+OP}



Definition at line 194 of file mpx\+\_\+supt.\+c.

\mbox{\Hypertarget{mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}\label{mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}} 
\index{mpx\_supt.c@{mpx\_supt.c}!current\_module@{current\_module}}
\index{current\_module@{current\_module}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{current\_module}{current\_module}}
{\footnotesize\ttfamily int current\+\_\+module = -\/1}



Definition at line 21 of file mpx\+\_\+supt.\+c.

\mbox{\Hypertarget{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}\label{mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}} 
\index{mpx\_supt.c@{mpx\_supt.c}!params@{params}}
\index{params@{params}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{params}{params}}
{\footnotesize\ttfamily \mbox{\hyperlink{structparam}{param}} params}



Definition at line 18 of file mpx\+\_\+supt.\+c.

\mbox{\Hypertarget{mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}\label{mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}} 
\index{mpx\_supt.c@{mpx\_supt.c}!student\_free@{student\_free}}
\index{student\_free@{student\_free}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{student\_free}{student\_free}}
{\footnotesize\ttfamily int($\ast$ student\+\_\+free) (void $\ast$)}



Definition at line 31 of file mpx\+\_\+supt.\+c.

\mbox{\Hypertarget{mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}\label{mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}} 
\index{mpx\_supt.c@{mpx\_supt.c}!student\_malloc@{student\_malloc}}
\index{student\_malloc@{student\_malloc}!mpx\_supt.c@{mpx\_supt.c}}
\doxysubsubsection{\texorpdfstring{student\_malloc}{student\_malloc}}
{\footnotesize\ttfamily \mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}}($\ast$ student\+\_\+malloc) (\mbox{\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}})}



Definition at line 27 of file mpx\+\_\+supt.\+c.

